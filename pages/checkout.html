<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Checkout</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <link rel="stylesheet" href="/assets/css/style.css" />
    <link rel="stylesheet" href="/assets/css/store/style.css" />
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css"
    />
    <!-- Intl-Tel-Input CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.min.css"
    />

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Poppins", sans-serif;
      }
      body {
        font-family: "Poppins", sans-serif;
        background-color: #f8f9fa;
        margin: 0;
        padding: 0;
      }

      .checkout-container {
        width: 90%;
        max-width: 1200px;
        margin: 50px auto;
        background: #fff;
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        align-items: flex-start;
      }
      .checkout-header {
        font-size: 26px;
        font-weight: bold;
        text-align: center;
        width: 100%;
        margin-bottom: 25px;
        color: #3399ff;
      }
      .cart-section {
        flex: 1;
        min-width: 300px;
        display: flex;
        flex-direction: column;
      }
      .cart-items {
        max-height: 400px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 20px;
        border-radius: 8px;
      }
      .cart-item {
        display: flex;
        align-items: center;
        background: #fff;
        padding: 15px;
        border-radius: 8px;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
      }
      .cart-item img {
        width: 90px;
        height: 90px;
        border-radius: 8px;
        object-fit: cover;
      }
      .cart-item-details {
        flex-grow: 1;
        margin-left: 15px;
      }
      .cart-item h4 {
        margin: 0;
        font-size: 18px;
        color: #333;
      }
      .cart-item p {
        margin: 5px 0 0;
        color: #3399ff;
        font-weight: bold;
      }
      .cart-item .quantity {
        font-size: 16px;
        color: #555;
        margin-top: 5px;
      }
      .total-container {
        text-align: right;
        font-size: 20px;
        font-weight: bold;
        color: #3399ff;
        padding: 15px;
        border-top: 2px solid #3399ff;
      }
      .checkout-form {
        flex: 1;
        min-width: 300px;
        background: #fafafa;
        padding: 20px;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
        gap: 15px;
      }
      .checkout-form h3 {
        margin-bottom: 15px;
      }
      .checkout-form input,
      .checkout-form select {
        width: 100%;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 6px;
        font-size: 16px;
        box-sizing: border-box;
      }
      .checkout-form button {
        width: 100%;
        background: #3399ff;
        color: white;
        padding: 15px;
        font-size: 20px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
      }
      .checkout-form button:hover {
        background: #2678cc;
      }
      @media (max-width: 768px) {
        .checkout-container {
          flex-direction: column;
          align-items: center;
        }
        .cart-section {
          width: 100%;
        }
      }
      .cart-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: #fff;
        padding: 10px;
        margin: 10px 0;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s ease-in-out;
      }

      .cart-item:hover {
        transform: scale(1.02);
      }

      .cart-item-img {
        width: 50px;
        height: 50px;
        object-fit: cover;
        border-radius: 5px;
      }

      .cart-item-details {
        flex: 1;
        margin-left: 15px;
      }

      .cart-item-details h4 {
        margin: 0;
        font-size: 16px;
      }

      .cart-price {
        font-weight: bold;
        color: #333;
      }

      .cart-quantity {
        font-size: 14px;
        color: #666;
      }

      .btn-remove-checkout {
        background: transparent;
        border: none;
        cursor: pointer;
        padding: 5px;
        transition: transform 0.2s ease-in-out;
      }

      .btn-remove-checkout svg {
        width: 20px;
        height: 20px;
        fill: red;
        transition: fill 0.3s ease-in-out, transform 0.2s ease-in-out;
      }

      .btn-remove-checkout:hover svg {
        fill: darkred;
        transform: scale(1.1);
      }
    </style>
  </head>
  <body>
    <div class="page-wrapper">
      <header
        class="header header-10 header-intro-clearance"
        style="position: sticky; top: 0; z-index: 10000"
      >
        <div class="header-middle">
          <div class="container">
            <div class="header-left">
              <a href="/" class="logo">
                <img
                  src="/assets/images/logo.jpg"
                  alt="Store logo"
                  width="105"
                  height="25"
                />
              </a>
            </div>

            <div class="header-right">
              <div class="header-dropdown-link">
                <a href="/" class="wishlist-link">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    width="24"
                    height="24"
                    fill="currentColor"
                  >
                    <path
                      d="M12.5812 2.68627C12.2335 2.43791 11.7664 2.43791 11.4187 2.68627L1.9187 9.47198L3.08118 11.0994L11.9999 4.7289L20.9187 11.0994L22.0812 9.47198L12.5812 2.68627ZM19.5812 12.6863L12.5812 7.68627C12.2335 7.43791 11.7664 7.43791 11.4187 7.68627L4.4187 12.6863C4.15591 12.874 3.99994 13.177 3.99994 13.5V20C3.99994 20.5523 4.44765 21 4.99994 21H18.9999C19.5522 21 19.9999 20.5523 19.9999 20V13.5C19.9999 13.177 19.844 12.874 19.5812 12.6863ZM5.99994 19V14.0146L11.9999 9.7289L17.9999 14.0146V19H5.99994Z"
                    ></path>
                  </svg>

                  <span class="wishlist-txt">Home</span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </header>
    </div>
    <form id="checkOut_form" action="">
      <div class="checkout-container">
        <div class="checkout-header">Checkout</div>
        <div class="cart-section">
          <div class="cart-items" id="cart-items">
            <!-- Cart items will be inserted here from db -->
          </div>
          <div class="total-container" id="total-price">Total: GHc 0</div>
        </div>
        <div class="checkout-form">
          <h3>Shipping Address</h3>

          <input id="username" type="text" placeholder="Full Name" readonly />
          <input
            id="street_add"
            type="text"
            placeholder="Street Address"
            required
          />
          <input id="city" type="text" placeholder="City/state" required />
          <select id="country" required>
            <option value="">Select Region</option>
            <option value="Ahafo Region">Ahafo Region</option>
            <option value="Ashanti Region">Ashanti Region</option>
            <option value="Bono Region">Bono Region</option>
            <option value="Bono East Region">Bono East Region</option>
            <option value="Central Region">Central Region</option>
            <option value="Eastern Region">Eastern Region</option>
            <option value="Greater Accra Region">Greater Accra Region</option>
            <option value="North East Region">North East Region</option>
            <option value="Northern Region">Northern Region</option>
            <option value="Oti Region">Oti Region</option>
            <option value="Savannah Region">Savannah Region</option>
            <option value="Upper East Region">Upper East Region</option>
            <option value="Upper West Region">Upper West Region</option>
            <option value="Volta Region">Volta Region</option>
            <option value="Western Region">Western Region</option>
            <option value="Western North Region">Western North Region</option>
          </select>

          <input
            id="phone"
            type="text"
            placeholder="Enter phone number"
            required
          />

          <button id="place_order_checkout">Place Order</button>
        </div>
      </div>
    </form>
    <script src="/assets/js/jquery.min.js"></script>
    <script src="/assets/js/getSess.js"></script>
    <script src="/assets/js/moime.js"></script>
    <script src="/assets/js/getCartItems.js"></script>
    <script src="/assets/js/getTotal.js"></script>
    <script src="/assets/js/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/intlTelInput.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/utils.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/toastify-js"
    ></script>
    <script src="/assets/js/checkout.js"></script>
    <script>
      $(document).ready(function () {
        let input = document.querySelector("#phone");
        let iti = window.intlTelInput(input, {
          initialCountry: "auto",
          geoIpLookup: function (callback) {
            $.get("https://ipinfo.io", function () {}, "jsonp").always(
              function (resp) {
                let countryCode = resp && resp.country ? resp.country : "US";
                callback(countryCode);
              }
            );
          },
          separateDialCode: true,
          preferredCountries: ["us", "gb", "gh", "ng", "ca"],
          utilsScript:
            "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",
        });

        // Restrict input to only numbers
        input.addEventListener("input", function () {
          this.value = this.value.replace(/\D/g, ""); // Remove non-numeric characters
        });

        // Restrict input length based on country selection
        function updateMaxLength() {
          let countryData = iti.getSelectedCountryData();
          let exampleNumber = intlTelInputUtils.getExampleNumber(
            countryData.iso2,
            true,
            intlTelInputUtils.numberFormat.NATIONAL
          );
          let maxLength = exampleNumber.replace(/\D/g, "").length; // Get only numbers
          input.setAttribute("maxlength", maxLength);
        }

        input.addEventListener("input", function () {
          updateMaxLength();
        });

        input.addEventListener("countrychange", function () {
          updateMaxLength();
        });

        updateMaxLength(); // Set initial max length
      });
    </script>
  </body>
</html>
